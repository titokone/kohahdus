\subsection{Criterion}
public abstract class Criterion

{\bf Base class for all criterion types. The many different types of criteria in TitoTrainer
are all used via the interface defined here. The analyzer component does not know the
details of different Criterion sub-classes. Only the composer used for creating and
modiying Tasks is aware that different types of criteria exist.

This class and all sub-classes shall provide following quarantees:
\begin{itemize}
\item getters always return Strings, regardless of the field type
\item getters never return null, but they may return empty strings
\item setters always take Strings, regarless of the field type. Invalid strings, (eg. non-numeric
      string for numeric field), empty strings, and null values are acceptable and will clear the
      field OR set the field to some default value.
\item neither getter nor setters will ever throw exceptions
\item Criterion objects are never in an invalid state. This is done by setting and validating
      mandatory fields in the constructor. However, Criterion object deserialized from the database
      are not subject to validation, they are assumed to be always valid.
\end{itemize}

For sake of brevity, Criterion subclasses are not described in this document.}

{\tt	protected static final long UNDEFINED = Long.MIN\_VALUE;}\\
Special case for signaling undefined numeric value. Criteria that deal with numeric
types (such as RegisterCriterium) need all 32-bits of int, but we also need a way
to represent undefined (null) values. Best-but-still-ugly solution is to use
longs for all numeric types and use a special signal value for undef.

{\tt	protected Criterion()}\\
Empty constructor for deserialization\\	

{\tt	protected Criterion(String id, boolean usesSecretInput)}\\
Constructor to initialize mandatory data members of Criterion.\\
{\tt@param id} Identifier that can used to distinguish the different criteria of one task\\
{\tt@param usesSecretInput} true if criterion is to be used in conjunction to secret input\\

{\tt	public String getId()}\\
Return the identifier of this Criterion\\

{\tt 	public boolean isSecretInputCriterion()} \\
Return true if this criterion is to be used with secret input \\

{\tt 	public String getAcceptanceFeedback()} \\
Return the feedback string used for acceptable solution attempts\\

{\tt 	public String getFailureFeedback()} \\
Return the feedback string used for failed solution attempts\\

{\tt	public String getHighQualityFeedback()} \\
Return the feedback string used for high quality solution attempts\\

{\tt 	public String setAcceptanceFeedback()} \\
Set the feedback string used for acceptable solution attempts\\

{\tt 	public String setFailureFeedback()} \\
Set the feedback string used for failed solution attempts\\

{\tt	public String setHighQualityFeedback()} \\
Set the feedback string used for high quality solution attempts\\

{\tt 	public abstract boolean hasAcceptanceTest(boolean usingModelAnswer)}\\
Return true if this criterion has test for evaluating failure/success of the
student's answer. Return of false means this criterion should NOT be used to
test passesAcceptanceTest(..)\\
{\tt@param usingModelAnswer} True if the inspection method for this task is model-answer\\

{\tt	public abstract boolean passesAcceptanceTest(TitoState studentAnswer, TitoState modelAnswer)} \\
Return true if student's solution meets the passing requirement of this Criterion. The behaviour
of this method is undefined if called despite a false return from hasAcceptanceTest(..)\\
{\tt@param studentAnswer} end state of TitoKone for student's answer\\
{\tt@param modelAnswer} end state of TitoKone for teacher's answer, or null\\

{\tt	public abstract String getAcceptanceTestValue()}\\
Return the value the student's answer will be compared to\\

{\tt	public abstract void setAcceptanceTestValue(String test)}\\
Set the value the student's answer will be compared to\\

{\tt 	public boolean hasQualityTest(boolean usingModelAnswer)}\\
Return true if this criterion has test for evaluating quality of the student's answer.
Criterion class provides a default implementation that always returns false\\

{\tt	public boolean passesQualityTest(TitoState studentAnswer, TitoState modelAnswer)} \\
Return true if student's solution meets the quality requirement of this Criterion.
Criterion class provides a default implementation that always returns false\\

{\tt	public String getQualityTestValue()}\\
Return the value the student's answer will be compared to.
Criterion class provides a default implementation that always returns an empty string\\

{\tt	public abstract void setQualityTestValue(String test)}\\
Set the value the student's answer will be compared to.
Criterion class provides a default implementation that is a no-op\\

{\tt 	public String serializeToXML()} \\
Return a serialized copy of this Criterion in XML-format\\

{\tt 	protected abstract String serializeSubClass();} \\
Serialize non-static data-members of Criterion sub-class to XML format. The subclass
can freely decide the names of the XML tags. The abstract Criterion class will handle
the serialization of its data-members. The serialized string is stored in the eAssari
database in a 2000-char field so subclasses should try to keep the tags and data short
(without being cryptic). \\
	
{\tt 	protected abstract void initSubClass(String serializedXML);} \\
Initialize non-static data-members of this Criterion subclass instance using the 
serialized representation returned by serializeToXML. Data-members of the
abstract Criterion class will have already been deserialized when this method
is called. \\
	
{\tt 	public static Criterion deserializeFromXML(String xml)} \\
Instantiate new Criterion object using the serialized form Xml \\
	
{\tt 	protected static String toXML(String tagname, boolean value)} \\
Serialize boolean value to XML string. Helper function for serializeSubClass() \\
	
{\tt 	protected static String toXML(String tagname, String value)} \\
Serialize String value to XML string. Helper function for serializeSubClass() \\
	
{\tt 	protected static String toXML(String tagname, long value)} \\
Serialize integer value to XML string. Helper function for serializeSubClass() \\

{\tt 	protected static boolean parseXMLBoolean(String XML, String tagname)} \\
Deserialize boolean value from XML string. Helper function for initSubClass() \\

{\tt 	protected static String parseXMLString(String XML, String tagname)} \\
Deserialize String value from XML string. Helper function for initSubClass() \\
	
{\tt 	protected static int parseXMLLong(String XML, String tagname)} \\
Deserialize integer value from XML string. Helper function for initSubClass() \\














\subsection{DBHandler}
public class DBHandler

{\bf Singleton class used for database interactions. Each public method of DBHandler class
encapsulates one database transaction, and thus may cause multiple inserts/updates/removes
with one call. The atomicity of the operations is quaranteed by using the transaction model
provided by the SQL standard.} \\
    
{\tt 		private DBHandler()} \\
Prevent youside instatiation by giving constructor private scope

{\tt 		public static synchronized DBHandler getInstance()} \\
Return DBHandler instance\\
	
{\tt 		public Task[] getTasks()} \\
Return all tasks\\
	
{\tt 		public Task getTask(String taskID)} \\
Return task identified by taskID\\

{\tt		public Criterion[] getCriteria(Task task)}\\
Return the criteria of task\\
	
{\tt 		public void createTask(Task task, Criterion[] criteria)} \\
Add new task to task database. The insert will affect all courses. This operation
will also create the criteria for the task\\
	
{\tt 		public void updateTask(Task task, Criterion[] criteria)} \\
Update existing task. The update will affect all courses. This operation
will also update the criteria of the task.\\

{\tt 		public void removeTask(Task task)} \\
Remove task from task database (and thus all courses). This will also remove all stored
answers of the task.\\

{\tt 		public User[] getUsers(Course course) throws SQLException} \\
Return all users who have attempted to solve at least one task of Course\\
	
{\tt 		public User getUser(String userID, String password) throws SQLException} \\
Return user identified by userID\\

{\tt 		public User getUser(String userID) throws SQLException} \\
Return user identified by userID\\

{\tt 		public void createUser(User user)} \\
Add new user to user database\\
	
{\tt 		public void updateUser(User user)} \\
Update existing user\\
	
%{\tt 		private void addCriterion(Task t, Criterion c)} \\
%Add criterion c to task. Helper for addTask(..) and updateTask(..)\\
	
%{\tt 		private void removeCriteria(Task t)} \\
%Remove criteria form task. Helper for removeTask(..) and updateTask(..)\\
	
%{\tt 		private void addTask(Course c, Task task)} \\
%Add task to Course. Helper for addTask(..) and addCourse(..) \\





\subsection{Task}
public class Task

{\bf Modify existing Task class by adding the following methods}\\

{\tt 		public String getName()} \\
Return the name of this task\\
	
{\tt 		public void setName(String name)} \\
Set the name of this task\\
	
{\tt 		public String getAuthor()} \\
Return name of the last person who has modified this task\\

{\tt 		public void setAuthor(String name)} \\
Set "last task modification by" attribute to Name, set last-modification-timestamp to current date and time\\

{\tt		public Date getModificationDate()} \\
Return the date and time this task was last modified\\

{\tt		public String getModelAnswer()} \\
Return code of the model answer provided by teacher\\
	
{\tt		public void setModelAnswer(String code)} \\
Set model answer code\\

{\tt		public boolean isValidateByModel()} \\
Return true if this task is to be validated by comparing results
of the student's answer to results of teacher's answer\\
	
{\tt		public void setValidateByModel(boolean useModel)} \\
Set the validation method of this task\\

{\tt		public String getCategory()} \\
Return the task category of this task\\
	
{\tt		public void setCategory(String category)} \\
Set task category of this task\\
	
{\tt		public boolean isFillInTask()} \\
Return true if this is a fill-in task\\
	
{\tt		public void setFillInTask(boolean fillIn)} \\
Set this task as fill-in or create-full-program \\

{\tt		public String getFillInPreCode()} \\
Return the code that is prepended before student's code in a fill-in task\\
	
{\tt		public void SetFillInPreCode(String code)} \\
Set the code that is prepended before student's code in a fill-in task\\
	
{\tt		public String getFillInPostCode()} \\
Return the code that is appended to student's code in a fill-in task\\
	
{\tt		public void SetFillInPostCode(String code)} \\
Set the code that is appended to student's code in a fill-in task\\

{\tt		public String getDescription()} \\
Return the description (tehtävänanto) of this task\\

{\tt		public void setDescription()} \\
Set description (tehtävänanto) of this task\\






\subsection{User}
public class User 

{\bf Modify existing User class by adding the following methods}\\

{\tt		public static final String STATUS\_STUDENT = "student";} \\ 
{\tt		public static final String STATUS\_TEACHER = "teacher";} \\ 
	
{\tt		public User()} \\ 
Construct unitialized User object\\
	
{\tt		public User(String userID)} \\ 
Construct unitialized User object with userid\\
	
{\tt		public void setLastName(String lastname)} \\ 
Set last name of this user\\
	
{\tt		public void setFirstName(String firstname)} \\ 
Set first name of this user\\
	
{\tt		public void setEmail(String email)} \\ 
Set email address of this user\\

{\tt		public void setUserID(String userID)} \\ 
Set userID of this user\\

{\tt		public String getStudentNumber()} \\ 
Return student number of this user. This identifier maps to <code>aeuser.extid</code> in the database\\
	
{\tt		public void setStudentNumber(String studentnum)} \\ 
Set student number of of this user\\
	
{\tt		public String getSocialSecurityNumber()} \\ 
Return social security number of this user. This identifier maps to <code>aeuser.extid2</code> in the database\\
	
{\tt		public void setSocialSecurityNumber(String ssn)} \\ 
Set social security number of this user\\
	
{\tt		public void setPassword(String pass)} \\ 
Set password of this user to Pass\\
	
{\tt		public void setLanguage(String lang)} \\ 
Set the preferred language of this user. The language is either "EN" or "FI\\

{\tt		public String getStatus()} \\
Return status of this user\\
	
{\tt		public boolean isTeacher()} \\ 
Return true of this user has the privelidges to add/remove/modify tasks and browse user statistics\\

{\tt		public void setStatus(String status)} \\  
{\tt		throws IllegalArgumentException if Status is not a valid Status string}\\
Set user status (teacher / student)\\
	
{\tt		public boolean isValid()} \\
Test validity of this user object. The object is considered valid if all data members are set with non-empty values.\\





\subsection{Course}
public class Course {

{\bf Simple class for holding basic course information}\\

{\tt		public Course(String name, String id)} \\
Create new Course instance using the specified name and ID\\
	
{\tt 	    public String getName()} \\
Return name of this course\\

{\tt 	    public void setName(String name)} \\
Set name of this course\\

{\tt 	    public String getID()} \\
Return course ID of this course\\





\subsection{TitoAnalyzer}
public class TitoAnalyzer implements AnalyzerInterface

{\bf Class for analyzing tasks, required by eAssari. 

Designed and implemented in 2nd development iteration. }\\





\subsection{TitoDisplayer}
public class TitoDisplayer implements DisplayerInterface

{\bf Class for displaying tasks, required by eAssari. 

Designed and implemented in 2nd development iteration. }\\





\subsection{TitoState}
public class TitoState

{\bf Capsulates the end-state of single run of TitoKone.

This class will provide methods for querying the TitoKone end state.}\\

{\tt		int getRegister(int num)} \\
Return contents of register Num (0 for "R0", etc)\\

{\tt		int getMemoryLocation(int address)} \\
Return contents of specified memory address\\
	
{\tt		int getSymbolAddress(String symbolName)} \\
Return memory address of specified symbol\\
	
{\tt		String getScreenOutput()} \\
Return TitoKone output as String in format "1234, 1234, 1234". The returned string may be empty, but it is never null.\\

{\tt		int getStackMaxSize()} \\
Return maximum stack size reached during program execution\\

{\tt		int getExecutionSteps()} \\
Return number of executed instructions\\
	
{\tt		int getCodeSize()} \\
Return number of instruction words in the program code\\

{\tt		int getDataSize()} \\
Return number of words in program's data-area\\
	
{\tt		int getMemoryAccessCount()} \\
Return number memory references made during program run. This number includes references caused by both data and instruction fetches\\
	
{\tt		String[] getUsedOpcodes()} \\







